(this["webpackJsonpsariska-meet-one-to-one-demo"]=this["webpackJsonpsariska-meet-one-to-one-demo"]||[]).push([[0],{407:function(e,t,n){},408:function(e,t,n){},445:function(e,t){},447:function(e,t){},457:function(e,t){},459:function(e,t){},486:function(e,t){},487:function(e,t){},492:function(e,t){},494:function(e,t){},501:function(e,t){},520:function(e,t){},544:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(47),c=n.n(i),o=(n(407),n(61)),s=(n(408),n(15)),u=n(55),d=n(29),l=n(39),p=n(45),f="ADD_LOCAL_TRACK",b="UPDATE_LOCAL_TRACK",v="REMOVE_LOCAL_TRACK",m="ADD_CONFERENCE",j="ADD_CONNECTION",O="REMOVE_CONFERENCE",h="SET_DEVICES",g="REMOVE_CONNECTION",x="REMOVE_ALL_LOCAL_TRACK",y="LOCAL_TRACK_MUTE_CHANGED",E="ADD_REMOTE_TRACK",k="UPDATE_REMOTE_TRACK",T="REMOVE_REMOTE_TRACK",_="REMOTE_TRACK_MUTE_CHANGED",N="SET_LAYOUT",I="SET_FULLSCREEN_MODE",C="SET_PROFILE",w="SET_MICROPHONE",S="SET_SPEAKER",R="SET_CAMERA",A="SET_PIN_PARTICIPANT",L="SET_PRESENTER",P="SHOW_NOTIFICATION",D="SET_GOOGLE_API_STATE",H="UPDATE_PROFILE",M="SET_MEETING_TITLE",U="SET_DISCONNECTED",z="SET_PRESENTATION_TYPE",F="SET_HAND_RAISE",W="SET_MODERATOR",K="PARTICIPANT_LEFT",B="SET_RESOLUTION",V="SET_USER_RESOLUTION",G=function(e){return{type:f,payload:e}},J=function(){return{type:y}},Y=n(12),q=n(24),Q=n(609),X=n(27),Z={file_recording_metadata:{share:!0}},$="".concat("https://api.sariska.io/","api/v1/misc/generate-token"),ee="exitFullScreen",te=("https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/living3_1005ac162f964b5f9e8499dfc5902250.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/ocean2_c48fa44e731d22668107a6589ddc33db.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/confetti_1296f69171bbef53d30ef80b6f201bf6.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/books2_1a904eb291cb029f74c848d4604c0ed2.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/trailer_182d4f7c61e37df010c786dfae0c879f.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/camping_20abb6723b26f70457222e9fd0f4891d.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/skyskrapers_02f52b6cea18f5f0384b7ac8db8ad86b.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/fireworks_c41626c514ccf319a3edb470b4d04949.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/clouds_bf46b8c3a1c02ee8628736254df3b587.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/cafe_at_night_de428ba989b9d616ec90ae7440b0944b.jpeg"),"https://s3.ap-south-1.amazonaws.com/".concat("meet.sariska.io","/static/media/ocean_b26b6f03864ea9ebc1263d9c50f0c59b.jpeg"),"".concat("https://api.sariska.io/","api/v1/misc/get-presigned"),{busy:"Already Busy",error:"Something went wrong",resource_constraint:"Resource constraint",unexpected_request:"Recording or live streaming is already enabled",service_unavailable:"Service unavailable"});function ne(e,t,n){return ae.apply(this,arguments)}function ae(){return(ae=Object(u.a)(Object(s.a)().mark((function e(t,n,a){var r,i,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.next=2;break;case 2:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({apiKey:"27fd6f9e85c304447d3cc0fb31e7ba8062df58af86ac3f9437",user:{id:t.id,avatar:a,name:n,email:t.email,moderator:t.isModerator},exp:"48 hours"})},e.prev=3,e.next=6,fetch($,r);case 6:if(!(i=e.sent).ok){e.next=15;break}return e.next=10,i.json();case 10:return c=e.sent,localStorage.setItem("SARISKA_TOKEN",c.token),e.abrupt("return",c.token);case 15:console.log(i.status);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(3),console.log("error",e.t0);case 21:case"end":return e.stop()}}),e,null,[[3,18]])})))).apply(this,arguments)}var re=n(611),ie=n(610),ce=function(e){return{payload:e,type:P}},oe=n(11);function se(e){return Object(oe.jsx)(ie.a,Object(q.a)({elevation:6,variant:"filled"},e))}function ue(e){var t=e.notification,n=r.a.useState(!1),i=Object(d.a)(n,2),c=i[0],o=i[1],s=Object(l.b)();return Object(a.useEffect)((function(){o(!0),null!==t&&void 0!==t&&t.autoHide&&setTimeout((function(){o(!1),s(ce({message:"",severity:"warning",autoHide:!0}))}),2e3)}),[null===t||void 0===t?void 0:t.message]),null!==t&&void 0!==t&&t.message?Object(oe.jsx)("div",{children:Object(oe.jsx)(re.a,{anchorOrigin:{vertical:"top",horizontal:"center"},open:c,autoHideDuration:2e3,children:Object(oe.jsx)(se,{classes:{maxWidth:"auto"},severity:t.severity,children:null===t||void 0===t?void 0:t.message})})}):null}var de=function(e){return{type:j,payload:e}},le=function(e){return{type:F,payload:e}},pe=function(e){return{type:L,payload:e}},fe=function(e){return{type:m,payload:e}},be=function(e){return{type:H,payload:e}},ve=n(10),me=n(601),je="#fff",Oe="#718EFF",he="#2616FF",ge="#121317",xe="linear-gradient(to right, #AABBFF, #A8A2FF 90%)",ye="red";var Ee=n(604),ke=function(e){var t=e.track,n=e.height,r=e.width,i=e.minHeight,c=e.minWidth,o=e.isPresenter,s=Object(a.useRef)(null);return Object(a.useEffect)((function(){null===t||void 0===t||t.attach(s.current)}),[t]),t?Object(oe.jsx)("video",{ref:s,playsInline:"1",autoPlay:"1",style:{width:r,height:n,transform:o?"initial":"scaleX(-1)",minWidth:c,minHeight:i}}):null},Te=n(614),_e=n(602),Ne=n(192),Ie=n.n(Ne),Ce=n(82),we=n.n(Ce),Se=n(603),Re=Object(me.a)((function(e){return{avatar:{zIndex:1,width:"80px",height:"80px","& svg":{fontSize:"48px"}},pan:{color:Oe,position:"absolute",marginTop:"-182px"},textBox:{color:je,position:"absolute",marginTop:"-27px",marginLeft:"4px"}}})),Ae=function(e){var t=e.tracks,n=e.height,a=e.width,r=e.minWidth,i=e.minHeight,c=e.localUserId,o=e.participant,s=e.isPresenter,u=Re(),d=s?null===t||void 0===t?void 0:t.find((function(e){return"desktop"===(null===e||void 0===e?void 0:e.getVideoType())})):null===t||void 0===t?void 0:t.find((function(e){return"video"===(null===e||void 0===e?void 0:e.getType())})),p=Object(l.c)((function(e){return e.layout})).raisedHandParticipantIds;Object(l.c)((function(e){return e.layout}));return Object(oe.jsxs)("div",{style:{background:s&&"#42424a"},children:[null!==d&&void 0!==d&&d.isMuted()?Object(oe.jsx)(Q.a,{sx:{width:a,height:n,minHeight:i,minWidth:r,background:"lightgray",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(oe.jsx)(Te.a,{className:u.avatar,children:Object(oe.jsx)(Ie.a,{})})}):Object(oe.jsx)(ke,{width:a,height:n,track:d,minHeight:i,minWidth:r,isPresenter:s}),Object(oe.jsx)(Q.a,{children:p[null===o||void 0===o?void 0:o.id]?Object(oe.jsx)(_e.a,{className:u.pan,children:Object(oe.jsx)(Se.a,{})}):null}),Object(oe.jsx)(_e.a,{className:we()(u.textBox,{userDetails:!0}),children:c===(null===o||void 0===o?void 0:o.id)?"You":null===o||void 0===o?void 0:o.name})]})},Le=Object(me.a)((function(e){return{root:{justifyContent:"center",display:"flex",flexDirection:"row",alignItems:"center"}}})),Pe=function(e){e.dominantSpeakerId;var t=Le(),n=Object(l.c)((function(e){return e.conference})),a=Object(l.c)((function(e){return e.localTrack})),r=Object(l.c)((function(e){return e.remoteTrack})),i=Object(l.c)((function(e){return e.layout})),c=n.getLocalUser(),o=Object(q.a)(Object(q.a)({},r),{},Object(Y.a)({},c.id,a)),s=[].concat(Object(X.a)(n.getParticipantsWithoutHidden()),[{_identity:{user:c},_id:c.id}]);s.filter((function(e){var t;return(null===(t=i.presenterParticipantIds)||void 0===t?void 0:t.indexOf(e._id))>=0})).forEach((function(e){s.push(Object(q.a)(Object(q.a)({},e),{},{presenter:!0}))}));var u=function(e){var t=Math.max(document.documentElement.clientWidth||0,window.innerWidth||0),n=Math.max(document.documentElement.clientHeight||0,window.innerHeight||0);return 1===e?{viewportWidth:16*(n-92)/9,viewportHeight:n-92}:{viewportWidth:t/e,viewportHeight:n-92}}(s.length);u.viewportWidth,u.viewportHeight;return Object(oe.jsx)(Q.a,{className:t.root,children:Object(oe.jsx)(Ee.a,{container:!0,item:!0,style:{gap:"20px"},children:s.map((function(e,t){var a;return o[null===e||void 0===e?void 0:e._id]||null!==e&&void 0!==e&&e._id?Object(oe.jsx)(Ee.a,{item:!0,style:{padding:"10px",background:"aliceblue"},children:Object(oe.jsx)(Ae,{tracks:o[null===e||void 0===e?void 0:e._id],height:"180px",width:"320px",minWidth:"320px",minHeight:"180px",participant:null===e||void 0===e||null===(a=e._identity)||void 0===a?void 0:a.user,localUserId:null===n||void 0===n?void 0:n.myUserId(),isPresenter:!(null===e||void 0===e||!e.presenter)})}):null}))})})},De=function(e){var t=e.dominantSpeakerId;return Object(l.c)((function(e){return e.conference})).setReceiverConstraints({colibriClass:"ReceiverVideoConstraints",defaultConstraints:{maxHeight:180,maxFrameRate:15}}),Object(oe.jsx)(Pe,{dominantSpeakerId:t})},He=n(607),Me=n(230),Ue=n.n(Me),ze=n(376),Fe=n.n(ze),We=n(378),Ke=n.n(We),Be=n(377),Ve=n.n(Be),Ge=n(231),Je=n.n(Ge),Ye=n(381),qe=n.n(Ye),Qe=n(380),Xe=n.n(Qe),Ze=n(379),$e=n.n(Ze),et=n(232),tt=n.n(et);n(163);var nt=Object(me.a)((function(e){return{icon:{marginRight:e.spacing(2),border:"1px solid ".concat(je),borderRadius:"50%",padding:e.spacing(1),cursor:"pointer",fontSize:"24px"},active:{opacity:"0.8",cursor:"pointer",color:ye},end:Object(Y.a)({background:"".concat(ye," !important"),borderColor:"".concat(ye," !important"),padding:"2px 12px !important",textAlign:"center",borderRadius:"30px !important",width:"42px",fontSize:"36px",marginRight:0,"&:hover":{opacity:"0.8",background:"".concat(ye," !important"),cursor:"pointer",color:"".concat(je," !important")}},e.breakpoints.down("sm"),{padding:"8px !important",width:"40px",fontSize:"24px"})}})),at=function(e){e.dominantSpeakerId;var t=nt(),n=Object(a.useState)(!1),r=Object(d.a)(n,2),i=r[0],c=r[1],o=Object(a.useState)(!1),f=Object(d.a)(o,2),b=f[0],m=f[1],j=Object(l.c)((function(e){return e.conference})),O=Object(l.c)((function(e){return e.localTrack})),h=O.find((function(e){return null===e||void 0===e?void 0:e.isAudioTrack()})),g=O.find((function(e){return null===e||void 0===e?void 0:e.isVideoTrack()})),x=Object(a.useRef)(),y=Object(a.useState)({}),E=Object(d.a)(y,2),k=E[0],T=E[1],_=Object(l.b)(),N=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===h||void 0===h?void 0:h.mute();case 2:_(J());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===h||void 0===h?void 0:h.unmute();case 2:_(J());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===g||void 0===g?void 0:g.mute();case 2:_(J());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),w=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,null===g||void 0===g?void 0:g.unmute();case 2:_(J());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t,n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.createLocalTracks({devices:["desktop"],resolution:720});case 3:n=e.sent,t=null===n||void 0===n?void 0:n.find((function(e){return"desktop"===(null===e||void 0===e?void 0:e.videoType)})),e.next=12;break;case 7:return e.prev=7,e.t0=e.catch(0),_(ce({message:"Oops, Something wrong with screen sharing permissions. Try reload",severity:"warning",autoHide:!0})),console.log("error in starting screen share"),e.abrupt("return");case 12:return e.next=14,j.addTrack(t);case 14:t.addEventListener(p.a.events.track.LOCAL_TRACK_STOPPED,Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R();case 1:case"end":return e.stop()}}),e)})))),j.setLocalParticipantProperty("presenting","start"),_(G(t)),_(pe({participantId:j.myUserId(),presenter:!0})),m(!0);case 19:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=O.find((function(e){return"desktop"===(null===e||void 0===e?void 0:e.videoType)})),e.next=3,j.removeTrack(t);case 3:_(pe({participantId:j.myUserId(),presenter:!1})),_({type:v,payload:t}),j.setLocalParticipantProperty("presenting","stop"),m(!1);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var t;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k.recording){e.next=2;break}return e.abrupt("return");case 2:if("none"!==j.getRole()){e.next=4;break}return e.abrupt("return",_(ce({severity:"info",autoHide:!0,message:"You are not moderator!!"})));case 4:return Z,_(ce({severity:"info",message:"Starting Recording",autoHide:!1})),e.next=8,j.startRecording({mode:p.a.constants.recording.mode.FILE,appData:JSON.stringify(Z)});case 8:t=e.sent,console.log("first session",t),x.current=t;case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(k.recording){e.next=2;break}return e.abrupt("return");case 2:if("none"!==(null===j||void 0===j?void 0:j.getRole())){e.next=4;break}return e.abrupt("return",_(ce({severity:"info",autoHide:!0,message:"You are not moderator!!"})));case 4:return e.next=6,j.stopRecording(localStorage.getItem("recording_session_id"));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),P=function(e){k[e.key]=e.value,T(Object(q.a)({},k))};Object(a.useEffect)((function(){j.getParticipantsWithoutHidden().forEach((function(e){var t;null!==(t=e._properties)&&void 0!==t&&t.recording&&P({key:"recording",value:!0})})),j.addEventListener(p.a.events.conference.RECORDER_STATE_CHANGED,(function(e){"on"===e._status&&"file"===e._mode&&(j.setLocalParticipantProperty("recording",!0),_(ce({autoHide:!0,message:"Recording started",severity:"info"})),P({key:"recording",value:!0}),localStorage.setItem("recording_session_id",null===e||void 0===e?void 0:e._sessionID)),"off"===e._status&&"file"===e._mode&&(j.removeLocalParticipantProperty("recording"),_(ce({autoHide:!0,message:"Recording stopped"})),P({key:"recording",value:!1})),"file"===e._mode&&e._error&&(j.removeLocalParticipantProperty("recording"),_(ce({autoHide:!0,message:te[e._error]})),P({key:"recording",value:!1}))}))}),[]);var D=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:_({type:"CLEAR_ALL"}),window.location.reload();case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(oe.jsx)(Q.a,{sx:{mt:4,color:je},children:Object(oe.jsxs)(Q.a,{children:[Object(oe.jsx)(He.a,{title:h?null!==h&&void 0!==h&&h.isMuted()?"Unmute Audio":"Mute Audio":"Check the mic or Speaker",children:h?null!==h&&void 0!==h&&h.isMuted()?Object(oe.jsx)(Fe.a,{onClick:I,className:we()(t.icon,t.active)}):Object(oe.jsx)(Ue.a,{onClick:N,className:t.icon}):Object(oe.jsx)(Ue.a,{onClick:N,style:{cursor:"unset"},className:t.icon})}),Object(oe.jsx)(He.a,{title:null!==g&&void 0!==g&&g.isMuted()?"Unmute Video":"Mute Video",children:null!==g&&void 0!==g&&g.isMuted()?Object(oe.jsx)(Ve.a,{onClick:w,className:we()(t.icon,t.active)}):Object(oe.jsx)(Ke.a,{onClick:C,className:t.icon})}),Object(oe.jsx)(He.a,{title:i?"Hand Down":"Raise Hand",children:i?Object(oe.jsx)(Je.a,{onClick:function(){j.setLocalParticipantProperty("handraise","stop"),c(!1)},className:we()(t.active,t.icon),style:{fontSize:"18px",padding:"11px"}}):Object(oe.jsx)(Je.a,{onClick:function(){j.setLocalParticipantProperty("handraise","start"),c(!0)},className:we()(t.icon),style:{fontSize:"18px",padding:"11px"}})}),Object(oe.jsx)(He.a,{title:b?"Stop Presenting":"Share Screen",children:b?Object(oe.jsx)($e.a,{onClick:R,className:we()(t.active,t.icon),style:{fontSize:"18px",padding:"11px"}}):Object(oe.jsx)(Xe.a,{onClick:S,className:we()(t.icon),style:{fontSize:"18px",padding:"11px"}})}),Object(oe.jsx)(He.a,{title:k.recording?"Stop Recording":"Start Recording",children:k.recording?Object(oe.jsx)(tt.a,{onClick:L,className:we()(t.active,t.icon),style:{fontSize:"18px",padding:"11px"}}):Object(oe.jsx)(tt.a,{onClick:A,className:we()(t.icon),style:{fontSize:"18px",padding:"11px"}})}),Object(oe.jsx)(He.a,{title:"Leave Call",children:Object(oe.jsx)(qe.a,{onClick:D,className:t.end})})]})})},rt=Object(me.a)((function(e){return{root:{display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",background:ge,minHeight:"calc(100vh - 16px)",minWidth:"calc((100vh - 16px) * 16 / 9)"}}})),it=function(){var e=rt(),t=Object(l.c)((function(e){return e.localTrack})),n=Object(l.c)((function(e){return e.conference})),r=Object(l.c)((function(e){return e.connection})),i=Object(l.c)((function(e){return e.layout})),c=Object(l.c)((function(e){return e.profile})),o=Object(l.c)((function(e){return e.notification})),f=(Object(l.c)((function(e){var t;return null===(t=e.media)||void 0===t?void 0:t.resolution})),Object(a.useState)(null)),b=Object(d.a)(f,2),v=b[0],m=b[1];console.log("profile",c);var j=Object(l.b)(),O=function(){var e=Object(u.a)(Object(s.a)().mark((function e(){var a,i,c;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===n||void 0===n||!n.isJoined()){e.next=3;break}return e.next=3,null===n||void 0===n?void 0:n.leave();case 3:a=Object(ve.a)(t),e.prev=4,a.s();case 6:if((i=a.n()).done){e.next=12;break}return c=i.value,e.next=10,c.dispose();case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:return e.next=22,null===r||void 0===r?void 0:r.disconnect();case 22:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})));return function(){return e.apply(this,arguments)}}();return Object(a.useEffect)((function(){if(n)return n.getParticipantsWithoutHidden().forEach((function(e){var t,n,a,r;("start"===(null===(t=e._properties)||void 0===t?void 0:t.handraise)&&j(le({raiseHand:!0,participantId:e._id})),"start"===(null===(n=e._properties)||void 0===n?void 0:n.presenting))&&(j(ce({autoHide:!0,message:"Screen sharing is being presenting by ".concat(null===(a=e._identity)||void 0===a||null===(r=a.user)||void 0===r?void 0:r.name)})),j(pe({participantId:e._id,presenter:!0})))})),n.addEventListener(p.a.events.conference.PARTICIPANT_PROPERTY_CHANGED,(function(e,t,n,a){var r,i;("handraise"===t&&"start"===a&&j(le({raiseHand:!0,participantId:e._id})),"handraise"===t&&"stop"===a&&j(le({raiseHand:!1,participantId:e._id})),"presenting"===t&&"start"===a)&&(j(ce({autoHide:!0,message:"Screen sharing started by ".concat(null===(r=e._identity)||void 0===r||null===(i=r.user)||void 0===i?void 0:i.name)})),j(pe({presenter:!0,participantId:e._id})));"presenting"===t&&"stop"===a&&j(pe({presenter:!1,participantId:e._id}))})),n.addEventListener(p.a.events.conference.TRACK_REMOVED,(function(e){j(function(e){return{type:T,payload:e}}(e))})),n.addEventListener(p.a.events.conference.TRACK_ADDED,(function(e){e.isLocal()||(setTimeout((function(){console.log("TRACK_ADDED",null===n||void 0===n?void 0:n.getRole())}),6e4),j(function(e){return{type:E,payload:e}}(e)))})),n.addEventListener(p.a.events.conference.TRACK_MUTE_CHANGED,(function(e){console.log("TRACK_MUTE_CHANGED",e),j({type:_})})),n.addEventListener(p.a.events.conference.DOMINANT_SPEAKER_CHANGED,(function(e){console.log("DOMINANT_SPEAKER_CHANGED",e),m(e)})),window.addEventListener("beforeunload",O),function(){O()}}),[n]),Object(a.useEffect)((function(){if(n){var e=function(e){e===v&&m(null),i.raisedHandParticipantIds[e]&&j(le({raiseHand:null,participantId:e})),j(function(e){return{type:K,payload:e}}(e))};return n.addEventListener(p.a.events.conference.USER_LEFT,e),function(){n.removeEventListener(p.a.events.conference.USER_LEFT,e)}}}),[n]),n&&n.isJoined()?Object(oe.jsxs)(Q.a,{className:e.root,children:[Object(oe.jsx)(De,{dominantSpeakerId:v}),Object(oe.jsx)(at,{dominantSpeakerId:v}),Object(oe.jsx)(ue,{notification:o})]}):Object(oe.jsx)(dt,{})},ct=n(608),ot=n(605),st=function(e){var t=e.width,n=e.height,a=e.minHeight,r=e.minWidth,i=e.videoTrack,c=e.tracks,o=e.state,s=e.handleChange,u=e.handleSubmit,d=Object(me.a)((function(e){return{avatar:{zIndex:1,width:"80px",height:"80px","& svg":{fontSize:"48px"}},videoContainer:{width:t,height:n,minHeight:a,minWidth:r,background:"lightgray",display:"flex",justifyContent:"center",alignItems:"center","& .userDetails":{display:"none"}},meetingName:{marginBottom:e.spacing(2)},actionButton:{marginRight:e.spacing(2),minWidth:"140px",textTransform:"initial"},submitButton:{marginTop:e.spacing(3),minWidth:"100%",textTransform:"initial",background:Oe,color:"white","&.MuiButton-root.Mui-disabled":{color:"rgba(0, 0, 0, 0.26)",background:"#e2dfdf"},"&:hover":{borderColor:he,background:je,color:he}}}}))();return Object(oe.jsxs)(oe.Fragment,{children:[Object(oe.jsx)(Q.a,{children:null!==i&&void 0!==i&&i.isMuted()?Object(oe.jsx)(Q.a,{sx:{width:t,height:n,minHeight:a,minWidth:r,background:"lightgray",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(oe.jsx)(Te.a,{className:d.avatar,children:Object(oe.jsx)(Ie.a,{})})}):Object(oe.jsx)(Q.a,{className:d.videoContainer,children:Object(oe.jsx)(Ae,{tracks:c,height:n,width:t,minHeight:a,minWidth:r})})}),Object(oe.jsxs)(Q.a,{sx:{display:"flex",flexDirection:"column",padding:"25px 0"},children:[Object(oe.jsx)(ct.a,{variant:"standard",name:"meetingName",value:o.meetingName,placeholder:"Enter Meeting Name",onChange:s,className:d.meetingName}),Object(oe.jsx)(ct.a,{variant:"standard",name:"userName",value:o.userName,placeholder:"Enter UserName",onChange:s})]}),Object(oe.jsx)(ot.a,{onClick:function(e){return s(e,"audio")},variant:"outlined",className:d.actionButton,children:o.audio}),Object(oe.jsx)(ot.a,{onClick:function(e){return s(e,"video")},variant:"outlined",className:d.actionButton,children:o.video}),Object(oe.jsx)(ot.a,{onClick:u,variant:"outlined",className:d.submitButton,disabled:!(o.meetingName&&o.userName),children:"Start Conference"})]})},ut=function(e){var t=e.tracks,n=Object(a.useState)({audio:"Mute Audio",video:"Mute Video",meetingName:"",userName:"",submit:"Start Conference"}),r=Object(d.a)(n,2),i=r[0],c=r[1],o=Object(l.c)((function(e){return e.profile})),f=Object(l.c)((function(e){return e.notification})),b=Object(l.c)((function(e){return e.conference})),v=t.find((function(e){return null===e||void 0===e?void 0:e.isAudioTrack()})),m=t.find((function(e){return null===e||void 0===e?void 0:e.isVideoTrack()})),j=window.location.hash.indexOf("iAmRecorder")>=0,O=window.location.hash.indexOf("testMode")>=0,h=Object(l.b)(),g=function(){var e=Object(u.a)(Object(s.a)().mark((function e(t,n){var a,r,o;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("audio"!==n){e.next=12;break}if("Mute Audio"!==i.audio){e.next=8;break}return e.next=4,null===v||void 0===v?void 0:v.mute();case 4:h(J()),c((function(e){return Object(q.a)(Object(q.a)({},e),{},{audio:"Unmute Audio"})})),e.next=12;break;case 8:return e.next=10,v.unmute();case 10:h(J()),c((function(e){return Object(q.a)(Object(q.a)({},e),{},{audio:"Mute Audio"})}));case 12:if("video"!==n){e.next=24;break}if("Mute Video"!==i.video){e.next=20;break}return e.next=16,m.mute();case 16:h(J()),c((function(e){return Object(q.a)(Object(q.a)({},e),{},{video:"Unmute Video"})})),e.next=24;break;case 20:return e.next=22,m.unmute();case 22:h(J()),c((function(e){return Object(q.a)(Object(q.a)({},e),{},{video:"Mute Video"})}));case 24:a=t.target,r=a.name,o=a.value,"meetingName"!==r&&"userName"!==r||c((function(e){return Object(q.a)(Object(q.a)({},e),{},Object(Y.a)({},r,"meetingName"===r?o.toLowerCase().replace(/\s/g,""):o))}));case 26:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),x=document.documentElement.clientHeight/2,y=16*x/9,E="180px";Object(a.useEffect)((function(){h(be({key:"moderator",value:"admin"===i.userName})),h(be({key:"name",value:i.userName}))}),[i.userName]);var k=function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n,a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),i.meetingName){e.next=4;break}return h(ce({message:"Meeting Title is required",severity:"warning",autoHide:!0})),e.abrupt("return");case 4:if(i.meetingName&&i.userName){e.next=7;break}return h(ce({message:"User name is required",severity:"warning",autoHide:!0})),e.abrupt("return");case 7:return e.next=9,ne(o,i.userName);case 9:return n=e.sent,e.next=12,new p.a.JitsiConnection(n,i.meetingName,!1);case 12:(a=e.sent).addEventListener(p.a.events.connection.CONNECTION_ESTABLISHED,Object(u.a)(Object(s.a)().mark((function e(){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(de(a)),e.next=3,T(a);case 3:case"end":return e.stop()}}),e)})))),a.addEventListener(p.a.events.connection.CONNECTION_FAILED,function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){var n;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("CONNECTION_DROPPED_ERROR",t),t!==p.a.errors.connection.PASSWORD_REQUIRED){e.next=6;break}return e.next=4,ne(o,i.meetingName);case 4:n=e.sent,a.setToken(n);case 6:t===p.a.errors.connection.CONNECTION_DROPPED_ERROR&&h({type:U,payload:"lost"});case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.addEventListener(p.a.events.connection.CONNECTION_DISCONNECTED,(function(e){console.log("connection disconnect!!!",e)})),a.connect();case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(u.a)(Object(s.a)().mark((function e(n){var a;return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.initJitsiConference();case 2:a=e.sent,t.forEach(function(){var e=Object(u.a)(Object(s.a)().mark((function e(t){return Object(s.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.addTrack(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),a.addEventListener(p.a.events.conference.CONFERENCE_JOINED,(function(){var e,t;h(fe(a)),h(be({key:"id",value:null===(e=a.getLocalUser())||void 0===e?void 0:e.id})),h(be({key:"name",value:null===(t=a.getLocalUser())||void 0===t?void 0:t.name})),h(be({key:"meetingTitle",value:i.meetingName})),i.meetingName&&localStorage.setItem("sariska-meet-meetingTitle",i.meetingName)})),a.addEventListener(p.a.events.conference.CONFERENCE_ERROR,(function(e){console.log("conference failed",e)})),a.join();case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return j&&!i.meetingName&&(c((function(e){return Object(q.a)(Object(q.a)({},e),{},{userName:"recorder"})})),c((function(e){return Object(q.a)(Object(q.a)({},e),{},{meetingName:localStorage.getItem("sariska-meet-meetingTitle")})}))),Object(a.useEffect)((function(){i.meetingName&&(O||j)&&k()}),[i.meetingName]),Object(oe.jsxs)(Q.a,{sx:{mt:2},children:[b?Object(oe.jsx)(it,{}):Object(oe.jsx)(st,{width:y,height:x,minHeight:E,minWidth:NaN,videoTrack:m,tracks:t,state:i,handleChange:g,handleSubmit:k}),Object(oe.jsx)(ue,{notification:f})]})},dt=function(){var e=Object(l.c)((function(e){return e.localTrack})),t=Object(a.useState)([]),n=Object(d.a)(t,2),r=n[0],i=n[1],c=Object(l.c)((function(e){var t;return null===(t=e.media)||void 0===t?void 0:t.resolution})),o=window.location.hash.indexOf("iAmRecorder")>=0,f=Object(l.b)();p.a.initialize(),Object(a.useEffect)((function(){p.a.mediaDevices.enumerateDevices((function(e){var t;f({type:h,payload:t})})),i([])}),[]);var b=function(){var t=Object(u.a)(Object(s.a)().mark((function t(){var n,a,r,u,l,b,v;return Object(s.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o){t.next=3;break}return i([]),t.abrupt("return");case 3:if(!(e.length>0)){t.next=5;break}return t.abrupt("return");case 5:return n=[],t.prev=6,t.next=9,p.a.createLocalTracks({devices:["audio"],resolution:c});case 9:a=t.sent,r=Object(d.a)(a,1),u=r[0],n.push(u),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(6),console.log("error in fetching local audio track",t.t0);case 18:return t.prev=18,t.next=21,p.a.createLocalTracks({devices:["video"],resolution:c});case 21:l=t.sent,b=Object(d.a)(l,1),v=b[0],n.push(v),t.next=30;break;case 27:t.prev=27,t.t1=t.catch(18),console.log("error in fetching video track",t.t1);case 30:i(n),n.forEach((function(e){return f(G(e))}));case 32:case"end":return t.stop()}}),t,null,[[6,15],[18,27]])})));return function(){return t.apply(this,arguments)}}();return Object(oe.jsx)("div",{style:{minHeight:"100vh",display:"flex",justifyContent:"center",alignItems:"center"},children:Object(oe.jsx)(Q.a,{sx:{textAlign:"center"},children:null!==r&&void 0!==r&&r.length?Object(oe.jsx)(ut,{tracks:r}):Object(oe.jsx)(ot.a,{variant:"outlined",onClick:b,children:"Create Local Tracks here"})})})},lt=function(e){var t=e.disabled,n=e.onClick,a=e.buttonText,r=e.width,i=e.top,c=e.homeButton,o=e.fontSize,s=Object(me.a)((function(e){var t;return{anchor:(t={color:je,textDecoration:"none",border:"1px solid ".concat(Oe),padding:"4px 40px",borderRadius:"10px",textTransform:"capitalize",marginTop:i||e.spacing(3),width:r||"178.69px",transition:"0.1s all ease",fontSize:o||"0.875rem",minWidth:c&&"175px"},Object(Y.a)(t,e.breakpoints.down("sm"),{width:r||"160.69px"}),Object(Y.a)(t,"&:hover",{background:xe,width:r||"178.69px",color:je,border:"1px solid transparent"}),Object(Y.a)(t,"&:active",{background:xe,width:r||"178.69px",color:je,border:"1px solid ".concat(Oe)}),Object(Y.a)(t,"&:focus",{background:xe,width:r||"178.69px",color:je,border:"1px solid ".concat(Oe)}),Object(Y.a)(t,"&.MuiButton-root.Mui-disabled",{color:je,border:"1px solid ".concat(Oe)}),t)}}))();return Object(oe.jsx)(ot.a,{className:we()(s.anchor,c?s.homeButton:""),disabled:t,onClick:n,children:a})},pt=Object(me.a)((function(e){return{root:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",background:ge,"& h3":Object(Y.a)({fontSize:"2rem",marginBottom:e.spacing(4)},e.breakpoints.down("sm"),{fontSize:"1.5rem"})},title:{color:je}}})),ft=function(){var e=Object(l.c)((function(e){var t;return null===(t=e.profile)||void 0===t?void 0:t.meetingTitle})),t=pt(),n=Object(o.f)();return Object(oe.jsxs)(Q.a,{className:t.root,children:[Object(oe.jsx)(_e.a,{variant:"h3",className:t.title,children:"You have left the meeting"}),Object(oe.jsxs)(Q.a,{children:[Object(oe.jsx)(lt,{onClick:function(){return n.push("/".concat(e))},buttonText:"Rejoin"}),"\xa0 \xa0",Object(oe.jsx)(lt,{onClick:function(){return n.push("/")},buttonText:"Go to Home"})]})]})};var bt,vt=function(){return Object(oe.jsx)(a.Fragment,{children:Object(oe.jsxs)(o.c,{children:[Object(oe.jsx)(o.a,{exact:!0,path:"/leave",component:ft}),Object(oe.jsx)(o.a,{exact:!0,path:"/:meetingId",component:it}),Object(oe.jsx)(o.a,{exact:!0,path:"/",component:dt})]})})},mt=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,616)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,i=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),i(e),c(e)}))},jt=n(154),Ot=n(145),ht=n(382),gt=n.n(ht),xt=n(383),yt={},Et=[],kt={type:"GRID",mode:ee,pinnedParticipant:{},presenterParticipantIds:[],raisedHandParticipantIds:{},disconnected:null,resolution:{},presentationType:null,moderator:{}},Tt=Object(q.a)({},kt),_t=JSON.parse(localStorage.getItem("SariskaReduxState")||"{}"),Nt={name:_t.name,meetingTitle:_t.meetingTitle,googleAPIState:0,color:_t.color,avatar:_t.avatar,email:_t.email,id:_t.id,moderator:_t.moderator},It=[],Ct={unreadMessage:0},wt={microphone:"",speaker:"",camera:"",devices:null,resolution:720,aspectRatio:16/9},St={},Rt=[],At={severity:"success",autoHide:!0},Lt={name:"",text:""},Pt={severity:"success",autoHide:!0},Dt=Object(Ot.b)({conference:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return e=t.payload;case O:return e=null;case"GET_CONFERENCE":return e=t.payload;default:return e}},connection:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case j:return e=t.payload;case g:return e=null;default:return e}},remoteTrack:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:yt,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case E:return t[bt=n.payload.getParticipantId()]||(t[bt]=[]),t[bt].push(n.payload),Object(q.a)({},t);case k:var a=t[bt=n.payload.getParticipantId()].findIndex((function(e){return e.getId()===n.payload.getId()}));return t[bt][a]=n.payload,Object(q.a)({},t);case T:return(bt=n.payload.getParticipantId())&&(t[bt]=t[bt].filter((function(e){return e.getId()!==n.payload.getId()}))),0===(null===(e=t[bt])||void 0===e?void 0:e.length)&&delete t[bt],Object(q.a)({},t);case"REMOVE_ALL_REMOTE_TRACK":return t={};case _:return Object(q.a)({},t);case K:return delete t[n.payload],Object(q.a)({},t);default:return t}},localTrack:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Et,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return e.push(t.payload),Object(X.a)(e);case b:var n=e.findIndex((function(e){return e.getId()===t.payload.track.getId()}));return e[n]=t.payload.newTrack,Object(X.a)(e);case v:return e=e.filter((function(e){return e.getId()!==t.payload.getId()})),t.payload.dispose(),Object(X.a)(e);case y:return Object(X.a)(e);case x:return e=[];default:return e}},layout:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:kt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case V:return t.payload.resolution?e.resolution[t.payload.participantId]=t.payload.resolution:delete e.resolution[t.payload.participantId],Object(q.a)({},e);case N:return e.type=t.payload,Object(q.a)({},e);case I:return e.mode=t.payload,Object(q.a)({},e);case U:return e.disconnected=t.payload,Object(q.a)({},e);case F:return t.payload.raiseHand?e.raisedHandParticipantIds[t.payload.participantId]=t.payload.participantId:delete e.raisedHandParticipantIds[t.payload.participantId],Object(q.a)({},e);case W:return t.payload.isModerator&&(e.moderator[t.payload.participantId]=t.payload.participantId),Object(q.a)({},e);case L:return t.payload.presenter?e.presenterParticipantIds.push(t.payload.participantId):e.presenterParticipantIds=e.presenterParticipantIds.filter((function(e){return e!==t.payload.participantId})),Object(q.a)({},e);case A:return e.pinnedParticipant=t.payload.participantId?{isPresenter:t.payload.type,participantId:t.payload.participantId}:{},Object(q.a)({},e);case z:return e.presentationType=t.payload.presentationType,Object(q.a)({},e);default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Nt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:var n=t.payload,a=n.name,r=n.email,i=n.avatar,c=n.id,o=n.moderator;n.color;return e.name=a,e.email=r,e.moderator=o,e.avatar=i,e.id=c,Object(q.a)({},e);case H:return e[t.payload.key]=t.payload.value,Object(q.a)({},e);case M:return e.meetingTitle=t.payload.meetingTitle,Object(q.a)({},e);case D:return e.googleAPIState=t.payload,Object(q.a)({},e);default:return e}},media:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return e.microphone=t.payload,Object(q.a)({},e);case S:return e.speaker=t.payload,Object(q.a)({},e);case R:return e.camera=t.payload,Object(q.a)({},e);case h:return e.devices=t.payload,Object(q.a)({},e);case B:return e.resolution=t.payload.resolution,e.aspectRatio=t.payload.aspectRatio,Object(q.a)({},e);default:return e}},message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:It,t=arguments.length>1?arguments[1]:void 0;return"ADD_MESSAGE"===t.type?(e.push(t.payload),Object(X.a)(e)):e},chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ct,t=arguments.length>1?arguments[1]:void 0;return"UNREAD_MESSAGES"===t.type?(e.unreadMessage=t.payload,Object(q.a)({},e)):e},color:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:St,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_COLOR":return e[t.payload.participantId]||(e[t.payload.participantId]=t.payload.color),Object(q.a)({},e);case"REMOVE_COLOR":return delete e[t.payload.participantId],Object(q.a)({},e);default:return e}},audioIndicator:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rt,t=arguments.length>1?arguments[1]:void 0;return"SET_AUDIO_LEVEL"===t.type?(e[t.payload.participantId]=t.payload.audioLevel,Object(q.a)({},e)):e},notification:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:At,t=arguments.length>1?arguments[1]:void 0;return t.type===P?(e=t.payload,Object(q.a)({},e)):e},subtitle:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Lt,t=arguments.length>1?arguments[1]:void 0;return"ADD_SUBTITLE"===t.type?(e.text=t.payload.text?t.payload.text:"",e.name=t.payload.name?t.payload.name:"",Object(q.a)({},e)):e},snackbar:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Pt,t=arguments.length>1?arguments[1]:void 0;return"SHOW_SNACKBAR"===t.type?(e=t.payload,Object(q.a)({},e)):e}}),Ht=Object(Ot.d)((function(e,t){return"CLEAR_ALL"===t.type?(Tt.presenterParticipantIds=[],Tt.mode=ee,Dt({localTrack:[],layout:Object(q.a)({},Tt),profile:e.profile,remoteTrack:{}},t)):Dt(e,t)}),Object(Ot.c)(Object(Ot.a)(gt.a,xt.a)));window.addEventListener("beforeunload",(function(){localStorage.setItem("SariskaReduxState",JSON.stringify(Ht.getState().profile))}));var Mt=n(384),Ut=n(606),zt=Object(Mt.a)({typography:{fontFamily:"'DM Sans', sans-serif"}});c.a.render(Object(oe.jsx)(r.a.StrictMode,{children:Object(oe.jsx)(Ut.a,{theme:zt,children:Object(oe.jsx)(jt.a,{children:Object(oe.jsx)(l.a,{store:Ht,children:Object(oe.jsx)(vt,{})})})})}),document.getElementById("root")),mt()}},[[544,1,2]]]);
//# sourceMappingURL=main.c5b14581.chunk.js.map